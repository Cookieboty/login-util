!function(t){"function"==typeof define&&define.amd?define(t):t()}(function(){"use strict";var o=function(t,e,n){return e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t};var e=function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")};function a(t,e){for(var n=0;n<e.length;n++){var o=e[n];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(t,o.key,o)}}var n=function(t,e,n){return e&&a(t.prototype,e),n&&a(t,n),t};function r(e,t){var n,o=Object.keys(e);return Object.getOwnPropertySymbols&&(n=Object.getOwnPropertySymbols(e),t&&(n=n.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),o.push.apply(o,n)),o}function i(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?r(Object(n),!0).forEach(function(t){o(e,t,n[t])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):r(Object(n)).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))})}return e}var t=function(){function t(){e(this,t),this.domTpl="",this.imgUrl={loginImgStart:!1,loginImgUrl:"",activityImgStart:"",activityImgUrl:""},this.agreement={start:"",serverUrl:"",privacyUrl:""},this.dataStorage={tokenKey:"token",path:"",url:"",storage:"localStorage"},this.close=!1,this.success="",this.error="",this.regulations="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAACAAAAAgCAYAAABzenr0AAACjUlEQVRYR82XP2gUQRTGv7d7l9hYCApKtEixM3NwtmIKk06UiCJEOMRG0E4FC7Wx2MLGNIKmU7AROVAQg0GxS1JEbD24md0ihYqCgoWNyd3tk5HdcLnc5fbChXHL3dn3fu/PN/OG4Pghx/6RG4CZKY7jEwCmmXmCmQMA+9IAfhFRTEQrABaCIFgmIs4TXC4ArfUMgHsAZB6jAAyAu0qpl/3WbwugtR5n5udEdNwaIqLPAF4z8wIRfWo0Gj/s+2KxeICZjxLRNIBzzHzEvmfmD0R0USm12gukJ0Acx1OtVstGsJ+IvgIIhRBPiai1XVTM7EdRdNmuZ+YxAD99358JgmCx239dAVLn7wGMAJgHcEkp9btfOtu/a633AngG4CyAdd/3T3aD2AJg0w7go40cwMNqtXozDMNkEOfZ2jAMvUql8gDADZsJAMc6y7EFoF6vr6Q1n69Wq+d36rwD4pXNhO2JUqk00R7MJoC021/YmjNzadC098qSLQcR1dOeuNCujg0Aq3NjTN1KjYiuSimf7CTtvf4xxlxh5sdWolLKUrZPbABEUTSZJMmilZoQYrxftw8Kl6pj1UrU87wpIcTSP2lnhrTWswBuEdGclPL6oA7yrDfGPGLma57nzQoh7mwCMMYsMbPdak8rpd7lMTjoGq31KQBviWhZSjnZmYFvAA4S0WEppd14hv4YY8aY+QuA70qpQ50AfwCMNpvN0XK5vD507wBqtdpIoVBYA7CmlNrz3wG4LYHzJoyi6H6SJLedydD5RuR8K7aScHoYZbp3ehynWXA7kFgIpyNZVgqnQ2nbEe1uLO+YcN1cTNohsqtZkiRn7NDa7Wpmh07P894M/Wq2G0dzZjPX3XA3Af4CAK3OMDyR7pcAAAAASUVORK5CYII=",this.regulationsStart="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAACAAAAAgCAYAAABzenr0AAACk0lEQVRYR8WXz0tUURTHP2csR6kWBU1tImgydTTbBFFm0KpdvxB3Bf2yoobGsmiTm1YutEFJLHDTOor6B1rUom1BI00aBoGVKUEuppczJ95Mr2bG93ME39vec873c86597x7hZA/CVmfmgDi/RqLKrtQNpEHlAVDeT81KnNBE/IN0J7UuNbRq3ACtMlBKCvIUwMefkjLRz8wngA7k7q5fg0DKL2g9X6CAgYi40sR7maH5LubjytAS0r3R4QnqG71KVxtNqsROTk5LK+d/B0BEn3ag+ojIFqjeMlNySFyKpOWx3ZxbAGKmaMvVixuKSo5rZPDdpVYBlDseUTfItRadoeCyayRZ0/1SVkGkOjLj6JydUVld2y4jGTuybXy5QqA3SndkUcnAb+7PSin8RtpLT+iFQBtKR1U9FbQqOX26xtgMeccQZDBd2m5bVlUACRShSzgNGQ8uXoOwJUjcHYMpr869iGbSUvzMoD4JY1FG9TRzUvdFB/oBhFh/qdyehRmHAbzr5xsmR6Xb2bMfxVI3NCD5PWll5DpoFVG5eLm0psZpfeBSyvqpCszJK8qAa7rUQr6zA2gYzvc6YbkBHz5UbIMLG46ReRYZlieBwJo2wYTl2FDo/B5Xot97mz5X3ZfmVvZ2QJ4tOBQK6TPQHRtqWsLi8rGdaWeBxI3jQvSlRmpaoGfTdjZDCPnoOEvhJWQZ8+r+mrkJWZNxMDHcF8T3D8PjfU1ZF4EEftjaC75HUR74zB2AaZmcd/tNjvadRAFGcXmpvw05z71bPTdR7HpEOrPyAQI/XdsQoR6IbH6FuqVzIII9VJqQYR6LS8/Ru03NV4wCheRyPFVfZjY/R07+jW2tNpPM697Qq3rnk+zWgP79fsDb4c9MFA9vTUAAAAASUVORK5CYII="}return n(t,[{key:"init",value:function(t){var e=t.imgUrl,n=void 0===e?{}:e,o=t.agreement,a=void 0===o?{}:o,r=t.close,e=void 0!==r&&r,o=t.success,r=t.error,t=t.dataStorage,t=void 0===t?{}:t;this.imgUrl=n,this.agreement=a,this.close=e,this.success=o,this.error=r,this.dataStorage=i(i({},this.dataStorage),{},{dataStorage:t}),this.show()}},{key:"cookieEven",value:function(t){var e=new Date;e.setTime(e.getTime()+2592e6);e=this.dataStorage.path||"/";document.cookie="".concat(this.dataStorage.tokenKey,"=").concat(t,";path=").concat(e)}},{key:"localStorageEven",value:function(t){localStorage.setItem(this.dataStorage.tokenKey,t)}},{key:"sessionStorageEven",value:function(t){sessionStorage.setItem(this.dataStorage.tokenKey,t)}},{key:"show",value:function(){this.domTpl="<div style=\"position: fixed; top: 0; left: 0; background: #fff; width: 100%; height: 100%; z-index: 9999;font-family: 'PingFangSC-Regular'\">\n        ".concat(this.close?'<div id="closeIcon" style="position: absolute; right: 10px; top: 10px"><p style="height: 20px; width: 20px;" >X</p></div>':"","\n        ").concat(this.imgUrl.loginImgStart?'<div class="logo" style="text-align: center; padding-top: 60px;">\n          <img src='.concat(this.imgUrl.loginImgUrl,' style="width: 36.6vw; height: 36.6vw" />\n        </div>'):"",'\n        <div style="width: 78.6vw; margin: 0 auto; margin-top: 16px;">\n          <input id="phone" type="text" name="phone" placeholder="请输入手机号码"\n                 style="width: 100%;font-size: 16px; padding-top: 22px; -webkit-tap-highlight-color: rgba(255, 255, 255, 0);\n                 outline: none;border: none;border-bottom: 1px solid rgba(232,232,232,1);padding-bottom: 10px;" />\n        </div>\n        <div style="width: 78.6vw; margin: 0 auto; display: flex;">\n          <input id="code" type="text" placeholder="请输入验证码"\n                 style="width: calc(100% - 94px); font-size: 16px; padding-top: 22px; -webkit-tap-highlight-color: rgba(255, 255, 255, 0);\n                 outline: none;border: none;border-bottom: 1px solid rgba(232,232,232,1);padding-bottom: 10px;" />\n          <p class="Obtain" style="width: 84px;border:1px solid rgba(42,112,254,1); font-size: 12px;padding: 5px 12px; text-align: center;margin: 20px 0 0px 0;\n                               color: #2A70FE;border-radius:8px;">获取验证码</p>\n        </div>\n        <div style="width: 78.6vw; margin: 0 auto;margin-top: 45px;position: relative;">\n          <div class="tipModel" style="display: none; position: absolute; top: -24px; left: 0; right: 0; color: #FF495F; font-size: 12px; text-align: center; margin-bottom: 12px;">123</div>\n          <p class="loginButton" style="font-size: 17px;background:rgba(203,205,209,1);box-shadow:0px 1px 4px 0px rgba(82,88,102,0.2);border-radius:4px; text-align: center;\n                    font-family: \'PingFangSC-Regular\';font-weight:400;color:rgba(255,255,255,1);line-height:40px;margin-block-start: 0;margin-block-end: 0;">登录</p>\n        </div>\n        ').concat(this.agreement.start?'<div style="width: 78.6vw; margin: 0 auto;margin-top: 12px;">\n          <div id="notes" style="display: flex;align-content: center;">\n            <i id="regulations" style="display: block;background: url('.concat(this.regulations,'); background-size: cover; width: 16px; height: 16px;margin-right: 5px;"></i>\n            <p style="color: #7A8599;font-size: 12px;margin-block-start: 0;margin-block-end: 0;">已阅读并同意<a href=').concat(this.agreement.serverUrl,' style="color: #2A70FE;text-decoration:none;">《用户服务协议》</a>和<a href=').concat(this.agreement.privacyUrl,' style="color: #2A70FE;text-decoration:none;">《隐私政策》</a></p>\n          </div>\n        </div>'):"","\n      </div>");var t=document.createElement("div");return t.innerHTML=this.domTpl,t.id="loginModel",document.body.appendChild(t),this.bindAction(),t}},{key:"hide",value:function(){document.body.removeChild(document.getElementById("loginModel"))}},{key:"createXMLHttpRequest",value:function(e,n){var o=this,a=new XMLHttpRequest;return a.open("POST",e,!1),a.setRequestHeader("content-type","application/json"),a.send(this.paramsEven()),a.onreadystatechange=function(){if(4===a.readyState&&200===a.status){var t=JSON.parse(a.responseText);return 0!==t.code?n(t.errmsg):(e===o.dataStorage.url&&(o["".concat(o.dataStorage.storage,"Even")](t.data.token),o.success&&o.success(t.data.token)),t)}}}},{key:"bindAction",value:function(){var e=this,n=function(t){var e=document.getElementsByClassName("tipModel")[0];e.innerHTML=t,e.style.display="block"};document.getElementsByClassName("Obtain")[0].onclick=function(){var t=document.getElementById("phone").value;if(!/^1(3|4|5|6|7|8|9)\d{9}$/.test(t))return n("请输入正确的手机号码"),!1;t={};document.getElementsByClassName("Obtain")[0]&&(t=e.createXMLHttpRequest(e.dataStorage.verifyCodeUrl,n)()),0===t.code&&(document.getElementsByClassName("Obtain")[0].className="ObtainStart",function(){var e=document.getElementsByClassName("ObtainStart")[0],n=50;e.innerHTML="".concat(n," S"),e.style.borderColor="rgba(245,246,247,1)",e.style.background="rgba(245,246,247,1)",--n;var o=setInterval(function(){var t;e.innerHTML="".concat(n," S"),--n<0&&(e.innerHTML="获取验证码",clearInterval(o),document.getElementsByClassName("ObtainStart")[0].className="Obtain",(t=document.getElementsByClassName("Obtain")[0]).style.borderColor="#2A70FE",t.style.background="#fff")},1e3)}())},this.close&&(document.getElementById("closeIcon").onclick=function(){e.hide()}),document.getElementById("code").oninput=function(){var t;document.getElementById("code").value&&((t=document.getElementsByClassName("loginButton")[0]).style.background="#3D424D",t.style.color="#fff")},document.getElementsByClassName("loginButton")[0].onclick=function(){return document.getElementById("phone").value&&document.getElementById("code").value?e.agreement.start&&document.getElementById("regulations").style.backgroundImage!=='url("'.concat(e.regulationsStart,'")')?n("请阅读用户相关条例"):void e.createXMLHttpRequest(e.dataStorage.url,n)():n("请输入正确的手机号码和验证码")},this.agreement.start&&document.getElementById("notes").addEventListener("click",function(){var t=document.getElementById("regulations");t.style.backgroundImage==='url("'.concat(e.regulations,'")')?t.style.backgroundImage='url("'.concat(e.regulationsStart,'")'):t.style.backgroundImage="url(".concat(e.regulations,")")},!1)}}]),t}();window.Login=new t});
